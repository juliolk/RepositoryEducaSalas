<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"	
	xmlns:xcp="http://www.xcapesoftware.com.br/xcp_tags">


	<style type="text/css">
		.docs-anexos-componente .docs-container {
		    padding: 0;
		    text-align: left;
		    display: flex;
		    flex-direction: row;
		    flex-wrap:wrap;
		    overflow-y: auto;
		}
		
		.docs-anexos-componente .doc-anexo {
			display: inline-block;
		    margin: 15px;
		    border: 1px solid #ddd;
		    width: 30%;
		    width: calc(33% - 30px);
		    min-width: 250px;
		    position: relative;
		}
		
		.docs-anexos-componente .doc-anexo-titulo {
		    padding: 7px 7px 7px 15px;
		    font-size: 14px;
		    background-color: #f5f5f5;
		    font-weight: 600;
		    white-space: nowrap;
		    text-overflow: ellipsis;
		    overflow: hidden;
		}
		
		.docs-anexos-componente .doc-anexo-icone {
		    width: 60px;
		    text-align: center;
		    float: left;
		    height: 60px;
		    vertical-align: middle;
		    line-height: 60px;
		}
		
		.docs-anexos-componente .doc-anexo-icone img {
		    height: 60px;
		}		
		
		.docs-anexos-componente .doc-anexo-conteudo {
		    margin-left: 70px;
		    padding: 0 10px;
		    min-height: 60px;
		}		
		.docs-anexos-componente .doc-anexo-container {
		    padding: 10px;
		}
		
		.docs-anexos-componente .doc-anexo-descricao {
			padding-top: 5px;
			padding-bottom: 20px;
			padding-right: 50px;
		}
		
		.docs-anexos-componente .doc-anexo-descricao label {
			display: block;
		}
		
		.docs-anexos-componente .doc-anexo-descricao span {
			padding-top: 3px;
		    margin-top: 3px;
		    border-top: 1px solid #dedede;
		    display: inline-block;
		    min-width: 55px;
    	}
		
		.docs-anexos-componente .doc-anexo-descricao-nao-informada {
			color: #777;
			font-size: 0.9em;
		}
		
		.docs-anexos-componente .doc-anexo-descricao-conteudo {
			color: #333;
		}
		
		.docs-anexos-componente .doc-anexo-botoes {
		    position: absolute;
		    bottom: 10px;
		    right: 5px;
		}
				
		.docs-anexos-componente .doc-anexo-botoes a {
			margin: 0 10px 0 10px;
		}		
		
  		.docs-anexos-componente .doc-anexo-msg-nenhum {
  			text-align: center;
  			width: 100%;
  		}
  		.docs-anexos-componente .doc-anexo-conteudo-dlg {
		    margin-left: 70px;
		    padding: 10px;
		}
		
  		.docs-anexos-componente .doc-anexo-icone-dlg {
  			height: 60px;
  			float: left;
  		}
  		
  		.docs-anexos-componente .doc-anexo-conteudo-dlg .ui-outputlabel {
  			display: block;
  			margin: 15px 0 5px 0; 
  		} 
  		.docs-anexos-componente .doc-anexo-conteudo-dlg > .ui-outputlabel {
  			margin-top: 0px
  		}
  		
  		.docs-anexos-componente .doc-anexo-conteudo-dlg .ui-fileupload {
  			margin-top: 20px;
  		} 
  		.docs-anexos-componente .doc-anexo-conteudo-dlg textarea {
  			display: block;
  			width: 100%;
		    min-width: 320px;
		    height: 150px;
		    overflow: auto;  			
  		} 
 		
 		.docs-anexos-componente .doc-anexo-nome-arquivo-dlg {
 			font-weight: 600;
 		}
 		
		.docs-anexos-componente.portal .docs-container {
		    background: #fff;
		} 		
		
		.docs-anexos-componente.portal .doc-anexo {
			border: none;
			box-shadow: 1px 1px 3px rgba(0,0,0,.2), 1px 1px 1px rgba(0,0,0,.15);
		}
		
		.docs-anexos-componente.portal .docs-anexos-botoes {
		    position: absolute;
		    top: 0;
		    left: 0;
		    display: block;
		}			
				
		.docs-anexos-componente.portal .docs-anexos-botoes .ui-toolbar {
		    margin: 0 !important;
		    border: none !important;
		    background-color: transparent !important;
		    padding: 0 !important;
		}
		
		.docs-anexos-componente.portal .docs-anexos-botoes .ui-button {
		    margin: 0 !important;
		}
		
		.docs-anexos-componente.portal .doc-anexo-conteudo-dlg label {
			font-weight: 100;
		}
		
		.docs-anexos-componente.portal .dlg-botoes-container {
			text-align: left;
   			margin-left: 60px;
		}
		
		.docs-anexos-componente.portal .doc-anexo-botoes a i.fa {
		    font-size: 18px;
		    color: #999;
		}
		
		.docs-anexos-componente.portal .doc-anexo-botoes a:hover,
		.docs-anexos-componente.portal .doc-anexo-botoes a:hover i.fa {
		    color: #333;
		    text-decoration: none;
		}
	</style>

	<div class="row">
		<div class="col-xs-12">
			<p:outputPanel>
				<h1 class="datacard-container-title"><a class="datacard-icon-action" data-toggle="collapse" data-target="#pnlcoldocanexos"><i class='fa fa-minus-square-o'/></a>#{bundle.tit_anexos}</h1>
			</p:outputPanel>
			
  			<div id="pnlcoldocanexos" class="collapse in">
  				
  				
				<div class="datacard-listcontainer">
					<div class="datacard datacard-grouped">
						<div class="datacard-title">
							#{bundle.tit_docanexos_talentos}
							
							<h:commandLink
								href="#"
								styleClass="datacard-icon-action"
								title="#{bundle.btn_anexar_documentos}">

								<f:setPropertyActionListener
									target="#{talentosPortalBacking.helper.talentosAnexos}"
									value="#{null}" />

								<p:ajax
									update=":frmDocAnexo"
									onstart="PF('w_dlgXcpExecStatus').show();"
									oncomplete="PF('w_dlgXcpExecStatus').hide(); PF('w_anexo').show();" />

								<i class="fa fa-fw fa-plus"></i> #{bundle.btn_adicionar_selecao}
							</h:commandLink>
						</div>
  				
						<h:panelGroup id="pnlDocsAnexos" class="docs-anexos-componente docs-wrapper portal">
						
							<div class="docs-container">
								<p:outputPanel styleClass="doc-anexo-msg-nenhum" rendered="#{talentosPortalBacking.helper.listAnexos.size() lt 1}">
									<h4>#{bundle.msg_nenhum_doc_anexado}</h4>
								</p:outputPanel>
								<ui:repeat var="doc" value="#{talentosPortalBacking.helper.listAnexos}">
									<div class="doc-anexo">
										<div class="doc-anexo-titulo"  title="#{doc.nome}">#{doc.nome}</div>
										<div class="doc-anexo-container">
										
											<p:commandLink
												immediate="true"
												id="btn_download_anex"
												update="@this"
												title="#{bundle.doc_anexo_download}"
												styleClass="doc-anexo-icone"
												onclick="PrimeFaces.monitorDownload(xcpDownloadFileStart, xcpDownloadFileStop)"
												ajax="false">
												<p:graphicImage value="#{talentosPortalBacking.getIconeArquivo(doc.nome)}"/>
												<p:fileDownload
													value="#{talentosPortalBacking.getAnexo(doc)}"
													contentDisposition="attachment" />
											</p:commandLink>
										
											<div class="doc-anexo-conteudo">
												<div class="doc-anexo-descricao">
												<table style="border-spacing: 0 5px;border-collapse: separate;">
													<tr>
														<td style="text-align: right"><label style="margin-bottom: 0px;margin-right: 2px;">#{bundle.descricao_doc_anexo}:</label></td>
														<td>
															<ui:fragment rendered="#{doc.descricao == null}">
																#{bundle.nao_informada}
															</ui:fragment> <ui:fragment rendered="#{doc.descricao != null}">
																#{doc.descricao}
															</ui:fragment>
														</td>
													</tr>
													<tr>
														<td style="text-align: right"><label style="margin-bottom: 0px;margin-right: 2px;">#{bundle.tipo_doc_anexo}:</label></td>
														<td>
															<ui:fragment rendered="#{doc.tipo == null}">
																#{bundle.nao_informada}
															</ui:fragment> <ui:fragment rendered="#{doc.tipo != null}">
																#{talentosPortalBacking.getTraducaoTipo(doc)}
															</ui:fragment>
														</td>
													</tr>
												</table>
												
												
												</div>
												<div class="doc-anexo-botoes">
													<xcp:commandLink
														href="#"
														title="#{bundle.msg_editar_descricao_documento}">
														<p:ajax 
															listener="#{talentosPortalBacking.actionEditarAnexo(doc)}" 
															update=":frmDocAnexo" 
															oncomplete="PF('w_anexo').show()" />													
														<i class="fa fa-fw fa-pencil"></i>
													</xcp:commandLink>
													
													<xcp:commandLink
														immediate="true"
														update=":#{p:component('pnlDocsAnexos')}"
														action="#{talentosPortalBacking.actionRemoveFile(doc)}">
														<p:confirm
															header="#{bundle.tit_confirma_remover}"
															message="#{bundle.msg_confirma_remover}"
															icon="ui-icon-alert" />
														<i class="fa fa-fw fa-trash"></i>								
													</xcp:commandLink>
													
												</div>
											</div>
										</div>
									</div>
								</ui:repeat>
							</div>
						</h:panelGroup>	  				
					</div>
				</div>
			</div>
		</div>
	</div>
		
</ui:composition>
<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:xcp="http://www.xcapesoftware.com.br/xcp_tags"
	xmlns:xcpfunc="http://www.xcapesoftware.com.br/xcp_func_tags"
	template="#{xcp:getLayout('manut')}">
	<ui:define name="conteudo">

		<style type="text/css">
.ui-paginator {
	clear: both;
	margin-top: 15px !important;
}

.ui-datalist-data {
	column-count: 2;
	column-gap: 20px;
}

@media ( max-width : 1280px) {
	.ui-datalist-data {
		column-count: 1;
	}
}

.datacard-container-title {
	margin-top: 20px;
}

.docs-anexos-componente .docs-container {
	padding: 0;
	text-align: left;
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	overflow-y: auto;
}

.docs-anexos-componente .docs-container .list-docs {
	width: 100%;
}

.docs-anexos-componente .doc-anexo {
	display: inline-block;
	margin-bottom: 20px;
	border: 1px solid #ddd;
	width: 100%;
}

.docs-anexos-componente .doc-anexo-titulo {
	padding: 7px 7px 7px 15px;
	font-size: 14px;
	background-color: #f5f5f5;
	font-weight: 600;
	white-space: nowrap;
	text-overflow: ellipsis;
	overflow: hidden;
}

.docs-anexos-componente .doc-anexo:hover .doc-anexo-titulo {
	background-color: #e5e5e5;
}

.docs-anexos-componente .doc-anexo-icone {
	text-align: center;
	float: left;
	height: 60px;
	vertical-align: middle;
	line-height: 60px;
}

.docs-anexos-componente .doc-anexo-icone img {
	height: 60px;
}

.docs-anexos-componente .doc-anexo-conteudo {
	margin-left: 70px;
	padding: 0 10px;
	min-height: 60px;
	position: relative
}

.docs-anexos-componente .doc-anexo-container {
	padding: 10px;
}

.docs-anexos-componente .doc-anexo-descricao {
	padding-top: 5px;
	padding-bottom: 20px;
	padding-right: 50px;
}

.docs-anexos-componente .doc-anexo-descricao label {
	display: block;
	padding-bottom: 3px;
	border-bottom: 1px solid #dedede;
}

.docs-anexos-componente .doc-anexo-descricao span {
	margin-top: 3px;
	display: inline-block;
	min-width: 55px;
}

.docs-anexos-componente .doc-anexo-descricao-nao-informada {
	color: #777;
	font-size: 0.9em;
}

.docs-anexos-componente .doc-anexo-descricao-conteudo {
	color: #333;
}

.docs-anexos-componente .doc-anexo-botoes {
	position: absolute;
	top: 0px;
	right: 0px;
}

.docs-anexos-componente .doc-anexo-botoes a {
	margin: 0 10px 0 10px;
}

.docs-anexos-componente .doc-anexo-msg-nenhum {
	text-align: center;
	width: 100%;
}

.docs-anexos-componente .doc-anexo-conteudo-dlg {
	margin-left: 70px;
	padding: 10px;
}

.docs-anexos-componente .doc-anexo-icone-dlg {
	height: 60px;
	float: left;
}

.docs-anexos-componente .doc-anexo-conteudo-dlg .ui-outputlabel {
	display: block;
	margin: 15px 0 5px 0;
}

.docs-anexos-componente .doc-anexo-conteudo-dlg>.ui-outputlabel {
	margin-top: 0px
}

.docs-anexos-componente .doc-anexo-conteudo-dlg .ui-fileupload {
	margin-top: 20px;
}

.docs-anexos-componente .doc-anexo-conteudo-dlg textarea {
	display: block;
	width: 100%;
	min-width: 320px;
	height: 150px;
	overflow: auto;
}

.docs-anexos-componente .doc-anexo-nome-arquivo-dlg {
	font-weight: 600;
}

.docs-anexos-componente.portal .docs-container {
	background: #fff;
}

.docs-anexos-componente.portal .doc-anexo {
	border: none;
	box-shadow: 1px 1px 3px rgba(0, 0, 0, .2), 1px 1px 1px
		rgba(0, 0, 0, .15);
}

.docs-anexos-componente.portal .doc-anexo:hover {
	box-shadow: 2px 2px 5px rgba(0, 0, 0, .2), 2px 2px 3px
		rgba(0, 0, 0, .15);
}

.docs-anexos-componente.portal .docs-anexos-botoes {
	position: absolute;
	top: 0;
	left: 0;
	display: block;
}

.docs-anexos-componente.portal .docs-anexos-botoes .ui-toolbar {
	margin: 0 !important;
	border: none !important;
	background-color: transparent !important;
	padding: 0 !important;
}

.docs-anexos-componente.portal .docs-anexos-botoes .ui-button {
	margin: 0 !important;
}

.docs-anexos-componente.portal .doc-anexo-conteudo-dlg label {
	font-weight: 100;
}

.docs-anexos-componente.portal .dlg-botoes-container {
	text-align: left;
	margin-left: 60px;
}

.docs-anexos-componente.portal .doc-anexo-botoes a i.fa {
	font-size: 30px;
	color: #999;
}

.docs-anexos-componente.portal .doc-anexo-botoes a:hover,.docs-anexos-componente.portal .doc-anexo-botoes a:hover i.fa
	{
	color: #333;
	text-decoration: none;
}

.ui-selectonemenu.ui-widget.ui-state-default.ui-corner-all.cmborder {
	width: 170px !important;
}

.cmborder .ui-icon.ui-icon-triangle-1-s.ui-c {
	top: 6px;
}
</style>


		<div class="content_bg-gray">

			<xcp:panelContent>

				<h:panelGroup
					id="panelTalentos"
					styleClass="floating-label big-controls">

					<p:outputPanel class="ui-content-full-width">

						<div class="datacard-container">



							<div class="row">
								<div class="col-xs-12">

									<div id="pnlcoldocanexos">


										<div class="datacard-listcontainer">
											<div class="datacard datacard-grouped">
												<div class="datacard-title">
													Documentos Disponíveis para Download

													<h:commandLink
														id="btn_add_formacao"
														href="#"
														immediate="true"
														styleClass="datacard-icon-action"
														title="Adicionar"
														action="#{documentosfuncPortalBacking.actionOpenUpload}">

														<p:ajax update=":frmDlgUpload" />

														<i class="fa fa-fw fa-plus"></i> Adicionar
													</h:commandLink>
												</div>

												<h:panelGroup
													id="pnlDocsAnexos"
													class="docs-anexos-componente docs-wrapper portal">
													<table>
														<tr>
															<td width="100%"><center>
																	<xcp:panelForm>
																		<xcp:lov
																			id="lovTipoPesq"
																			value="#{documentosfuncPortalBacking.tipodocPesq}"
																			label="#{bundle.lbl_tipo}"
																			query="tipodocumentofunc"
																			size="6"
																			style="margin-top: -20px;"
																			update="tblDocs"
																			params="#{documentosfuncPortalBacking.map}" />
																	</xcp:panelForm>
																</center></td>
															<td>
															<table>
																	<tr>
																		<td><p:outputLabel
																				value="#{bundle.lbl_origem}"
																				style="padding-top:21px;padding-right:2px" /></td>
																		<td><p:selectOneMenu
																				value="#{documentosfuncPortalBacking.origemdocPesq}"
																				styleClass="cmborder">
																				<p:ajax
																					update="tblDocs"
																					onstart="PF('w_dlgXcpExecStatus').show()"
																					oncomplete="PF('w_dlgXcpExecStatus').hide()" />
																				<f:selectItems
																					value="#{documentosfuncPortalBacking.itensOrigem}" />
																			</p:selectOneMenu></td>
																	</tr>
																</table>
															</td>
															<td>
																<table>
																	<tr>
																		<td><p:outputLabel
																				value="#{bundle.lbl_ordenacao}"
																				style="padding-top:21px;padding-right:2px;padding-left:15px" /></td>
																		<td><p:selectOneMenu
																				value="#{documentosfuncPortalBacking.orderBy}"
																				styleClass="cmborder">
																				<p:ajax
																					update="tblDocs"
																					onstart="PF('w_dlgXcpExecStatus').show()"
																					oncomplete="PF('w_dlgXcpExecStatus').hide()" />
																				<f:selectItems
																					value="#{documentosfuncPortalBacking.itensOrderBy}" />
																			</p:selectOneMenu></td>
																	</tr>
																</table>



															</td>
														</tr>
													</table>

													<div class="docs-container">
														<p:outputPanel
															styleClass="doc-anexo-msg-nenhum"
															rendered="#{documentosfuncPortalBacking.pesquisar().size() lt 1}">
															<h4>#{bundle.msg_nenhum_doc_anexado}</h4>
														</p:outputPanel>


														<p:dataList
															id="tblDocs"
															styleClass="list-docs"
															itemStyleClass=""
															value="#{documentosfuncPortalBacking.listaDocumentosfuncLazy}"
															var="doc"
															lazy="true"
															paginator="true"
															rows="12"
															emptyMessage="Nenhum documento disponível">

															<div class="doc-anexo">
																<div
																	class="doc-anexo-titulo"
																	title="#{doc.registroFk.nomedoc == null ? 'documento.pdf' : doc.registroFk.nomedoc}">
																	#{doc.registroFk.nomedoc == null ? 'documento.pdf' :
																	doc.registroFk.nomedoc}</div>

																<div class="doc-anexo-container">

																	<p:commandLink
																		immediate="true"
																		id="btn_download_anex"
																		update="@this"
																		title="#{bundle.doc_anexo_download}"
																		styleClass="doc-anexo-icone"
																		onclick="PrimeFaces.monitorDownload(xcpDownloadFileStart, xcpDownloadFileStop)"
																		disabled="#{doc.registroFk == null}"
																		ajax="false">
																		<p:graphicImage
																			value="#{documentosfuncPortalBacking.getIconeArquivo(doc.registroFk.nomedoc == null ? 'documento.pdf' : doc.registroFk.nomedoc)}" />
																		<p:fileDownload
																			value="#{documentosBacking.getDownloadDocumento(doc.registro)}"
																			contentDisposition="attachment" />
																	</p:commandLink>

																	<div class="doc-anexo-conteudo">
																		<div class="doc-anexo-descricao">
																			<label>#{bundle.col_descricao}:</label> <span
																				class="doc-anexo-descricao-conteudo">#{doc.registroFk.descricao}</span>
																		</div>
																		<div class="row">
																			<div class="col-xs-6">
																				<div>
																					<strong>#{doc.origem lt 1000 ?
																						bundle.col_dtpublicacao : bundle.col_data}: </strong>
																					<xcp:outputSimpleDate
																						value="#{doc.registroFk.dtpublicacao}" />
																				</div>
																				<div>
																					<strong>#{bundle.col_tipo}: </strong>
																					<xcp:outputSimple
																						value="#{doc.tipodocFk.descricao}" />
																				</div>
																				<div>
																					<strong>#{bundle.col_origem}: </strong>
																					<xcp:outputSimple
																						itens="#{documentosfuncPortalBacking.itensOrigem}"
																						value="#{doc.tipodocFk.utilizacao == 8 ? 'Transferências' : doc.origem}" />
																				</div>
																			</div>
																			<div class="col-xs-6">
																				<div>
																					<strong>#{bundle.col_dtvalidade}: </strong>
																					<xcp:outputSimpleDate
																						value="#{doc.dtvalidade}"
																						rendered="#{doc.dtvalidade != null}" />
																				</div>
																				<div>
																					<strong><xcp:outputSimple
																							value="#{bundle.col_nrdoc}:"
																							rendered="#{doc.registroFk.nrdoc != null}" /></strong>
																					<xcp:outputSimple
																						value="#{doc.registroFk.nrdoc}"
																						rendered="#{doc.registroFk.nrdoc != null}" />
																				</div>
																				<div>
																					<strong><xcp:outputSimple
																							value="#{bundle.col_processo}:"
																							rendered="#{not empty doc.registroFk.processo}" /></strong>
																					<xcp:outputSimple
																						value="#{doc.registroFk.processo}"
																						rendered="#{not empty doc.registroFk.processo}" />
																				</div>
																			</div>
																		</div>

																		<div class="doc-anexo-botoes">
																			<table>
																				<tr>
																					<td><p:commandLink
																							immediate="true"
																							id="btn_download_anex_small"
																							update="@this"
																							title="#{bundle.doc_anexo_download}"
																							styleClass="doc-anexo-icone"
																							onclick="PrimeFaces.monitorDownload(xcpDownloadFileStart, xcpDownloadFileStop)"
																							disabled="#{doc.registroFk == null}"
																							ajax="false">
																							<i class="fa fa-fw fa-download"></i>
																							<p:fileDownload
																								value="#{documentosBacking.getDownloadDocumento(doc.registro)}"
																								contentDisposition="attachment" />
																						</p:commandLink></td>
																				</tr>
																				<tr>
																					<td><xcp:commandLink
																							title="#{bundle.doc_anexo_download}"
																							action="#{documentosfuncPortalBacking.actionRemoveUpload(doc)}"
																							rendered="#{doc.tipodocFk.indPortal == 1}"
																							update="tblDocs">
																							<p:confirm
																								header="#{bundle.tit_confirma_remover}"
																								message="#{bundle.tit_confirma_exclusao}"
																								icon="ui-icon-alert" />

																							<i class="fa fa-fw fa-trash fa-lg"></i>
																						</xcp:commandLink></td>
																				</tr>
																			</table>
																		</div>
																	</div>
																</div>
															</div>
														</p:dataList>
													</div>
												</h:panelGroup>
											</div>
										</div>
									</div>
								</div>
							</div>

						</div>
					</p:outputPanel>
				</h:panelGroup>

				<h:panelGroup
					rendered="#{documentosfuncPortalBacking.listaDocumentosfuncLazy == null}">
					<h:outputText value="#{bundle.mgs_emptyMessage}" />

				</h:panelGroup>
			</xcp:panelContent>
		</div>

	</ui:define>
	<ui:define name="modalPanelArea">

		<p:dialog
			header="#{bundle.lbl_titulo_upload}"
			modal="true"
			id="dlgUpload"
			widgetVar="dlgUpload_w"
			dynamic="true"
			closeOnEscape="true"
			styleClass="full-page-dialog rightside-dialog"
			resizable="false"
			draggable="false"
			onShow="$(this).eachHasValue();">
			<xcp:form
				id="frmDlgUpload"
				multipart="true">
				<xcp:panelForm>

					<xcp:lov
						id="lovTipo"
						value="#{documentosfuncPortalBacking.docfunc.tipodocFk}"
						label="#{bundle.lbl_tipo}"
						required="true"
						query="tipodocumento_portal"
						size="6" />

					<xcp:text
						id="txtDescricao"
						label="#{bundle.lbl_descricao}"
						value="#{documentosfuncPortalBacking.descricao}"
						maxlength="100"
						size="75"
						required="true" />

					<xcp:date
						id="txtDtvalidade"
						value="#{documentosfuncPortalBacking.docfunc.dtvalidade}"
						label="#{bundle.lbl_dtvalidade}" />

					<xcp:inputFile
						label="#{bundle.lbl_arquivo}"
						id="inpFile"
						value="#{documentosfuncPortalBacking.uploadFile}"
						required="true" />

				</xcp:panelForm>
				<p:toolbar>
					<f:facet name="left">
						<xcp:commandButton
							id="btn_upload"
							value="#{bundle.btn_upload}"
							ajax="false"
							icon="ui-icon-gear"
							action="#{documentosfuncPortalBacking.actionSalvarUpload}" />
					</f:facet>
				</p:toolbar>
			</xcp:form>
		</p:dialog>
	</ui:define>

</ui:composition>

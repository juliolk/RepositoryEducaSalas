<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:xcp="http://www.xcapesoftware.com.br/xcp_tags"
	template="#{xcp:getLayout('manut')}">
	<ui:define name="conteudo">
		<xcp:panelContent>
			<p:panelGrid>
				<p:row>
					<p:column styleClass="alinhatopo">

						<p:fieldset
							legend="#{bundle.tit_filtros_geracao}"
							style="width:1000px;height:400px;">
							<xcp:panelForm>

								<xcp:lov
									id="lovPeriodo"
									value="#{encerramentoAvalDesempBacking.periodo}"
									label="#{bundle.lbl_periodo}"
									required="true"
									query="periodos"
									params="#{encerramentoAvalDesempBacking.paramsPeriodo}"
									size="8"
									sizeDesc="60"
									update="funcBoletim"
									selectionListener="#{encerramentoAvalDesempBacking.selectPeriodo}" />


							</xcp:panelForm>

							<xcp:commandButton
								id="btn_busca_boletim"
								update="funcBoletim"
								value="#{bundle.btn_busca_boletim}"
								action="#{encerramentoAvalDesempBacking.actionBuscar}"
								icon="ui-icon-search"
								style="margin-bottom:5px;margin-top:5px" />

							<p:dataTable
								id="funcBoletim"
								var="rowMult"
								value="#{encerramentoAvalDesempBacking.listaFuncionarios}"
								selection="#{encerramentoAvalDesempBacking.listaFuncionariosSel}"
								rowKey="#{rowMult.PK}"
								scrollHeight="270"
								scrollWidth="980"
								scrollable="true"
								rowIndexVar="idx"
								emptyMessage="#{bundle.msg_sem_resultado}">

								<p:ajax
									event="toggleSelect"
									update=":#{p:component('btn_gerar_boletim')} :#{p:component('btn_desfazer')}" />
								<p:ajax
									event="rowSelectCheckbox"
									update=":#{p:component('btn_gerar_boletim')} :#{p:component('btn_desfazer')}" />
								<p:ajax
									event="rowUnselectCheckbox"
									update=":#{p:component('btn_gerar_boletim')} :#{p:component('btn_desfazer')}" />
								<p:column
									selectionMode="multiple"
									style="width:15px;text-align:center" />

								<xcp:column
									headerText="#{bundle.col_numero}"
									type="Number"
									size="6">
									<xcp:outputSimpleNumber
										value="#{rowMult.numero}"
										precision="6"
										scale="0" />
								</xcp:column>

								<xcp:column
									headerText="#{bundle.col_numMatricula}"
									type="Number"
									size="6">
									<xcp:outputSimpleNumber
										value="#{rowMult.matricula}"
										precision="8"
										scale="0" />
								</xcp:column>

								<xcp:column
									headerText="#{bundle.col_desNomeFunc}"
									type="String"
									size="25">
									<xcp:outputSimple value="#{rowMult.funcionarioFk.nome}" />
								</xcp:column>

								<xcp:column
									headerText="#{bundle.col_dtencerramento}"
									type="Date"
									size="8">
									<xcp:outputSimpleDate value="#{rowMult.dtencerramento}" />
								</xcp:column>

							</p:dataTable>
						</p:fieldset>
					</p:column>
				</p:row>
			</p:panelGrid>

			<p:toolbar styleClass="xcp_pmanut_form_toolbar">
				<f:facet name="left">

					<xcp:commandButton
						id="btn_gerar_boletim"
						update="funcBoletim"
						value="#{bundle.btn_gerar_boletim}"
						action="#{encerramentoAvalDesempBacking.actionEncerrar}"
						disabled="#{encerramentoAvalDesempBacking.disabledActions}"
						icon="ui-icon-gear" />

					<xcp:commandButton
						id="btn_desfazer"
						update="funcBoletim"
						value="#{bundle.btn_desfazer_lanc}"
						action="#{encerramentoAvalDesempBacking.actionDesfazer}"
						disabled="#{encerramentoAvalDesempBacking.disabledActions}"
						icon="ui-icon-gear" />

				</f:facet>
			</p:toolbar>


		</xcp:panelContent>
	</ui:define>

</ui:composition>
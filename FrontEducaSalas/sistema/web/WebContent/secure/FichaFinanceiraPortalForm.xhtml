<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:xcp="http://www.xcapesoftware.com.br/xcp_tags"
	template="#{xcp:getLayout('manut')}">
	<ui:define name="conteudo">
        <xcp:panelContent>
        
        
			<p:fieldset
				legend="Informe o período">
				
					<xcp:panelForm
						controlsSizeClass="big-controls"
						floatingLabel="#{xcpLoginBacking.tipoAcesso == 2}">
					
						<div class="container-fluid">
							<div class="row">
								<div class="col-sm-2">
				
									<p:outputPanel
									    styleClass="input-group">
								
										<p:spinner 
											id="anoReferencia" 
											value="#{fichaFinanceiraPortalBacking.anoSelecionado}"
											size="4" 
											stepFactor="1" />
											
					                	<p:outputLabel
					                		for="anoReferencia"
					                    	value="#{bundle.lbl_ano}"/>
							
										<hr/>
											
									</p:outputPanel>
									
								</div>
							</div>
						</div>
							
					</xcp:panelForm>

			</p:fieldset>
			
			<p:toolbar styleClass="xcp_pmanut_form_toolbar">
				<f:facet name="left">
					<xcp:commandButton
						id="btn_listar"
						value="#{bundle.lbl_imprimir}"
						action="#{fichaFinanceiraPortalBacking.imprimir}"
						icon="ui-icon-print">
					</xcp:commandButton>

			        <xcp:commandButton
			            id="btnDownloadRelatorio"
			            widgetVar="wBtnDownloadRelatorio"
			            ajax="false"
			            immediate="true"
			            process="@this"
			            style="display: none;"
			            onclick="PrimeFaces.monitorDownload(showStatus, hideStatus)">
                        <p:fileDownload
                            value="#{xcpExecObjBacking.file}"
                            contentDisposition="attachment" />
			        </xcp:commandButton>

				</f:facet>
			</p:toolbar>
            <p:ajaxStatus
                onstart="PF('w_dlgXcpExecStatus').show()"
                onsuccess="PF('w_dlgXcpExecStatus').hide()"
                oncomplete="PF('w_dlgXcpExecStatus').hide()"
                onerror="PF('w_dlgXcpExecStatus').hide()"
            />
		    <script type="text/javascript">
		    function showStatus() {
                PF('w_dlgXcpExecStatus').show();
			}
		    function hideStatus() {
		    	PF('w_dlgXcpExecStatus').hide();
			}
		    </script>
        </xcp:panelContent>
	</ui:define>

</ui:composition>

